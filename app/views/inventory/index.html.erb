<div class="inventory">
  <h1 class="inventory__title">Inventory</h1>

  <div class="inventory-stats">
    <div class="inventory-stats__item">
      <span class="inventory-stats__label">Capacity Used:</span>
      <span class="inventory-stats__value"><%= @game.current_inventory_size %> / <%= @game.inventory_capacity %></span>
    </div>
    <div class="inventory-stats__item">
      <span class="inventory-stats__label">Total Value:</span>
      <span class="inventory-stats__value">$<%= number_with_precision(@game.inventory_value, precision: 2, delimiter: ',') %></span>
    </div>
    <div class="inventory-stats__item">
      <span class="inventory-stats__label">Unique Items:</span>
      <span class="inventory-stats__value"><%= @inventory_items.count %></span>
    </div>
  </div>

  <% if @inventory_items.any? %>
    <div class="inventory-items">
      <% @inventory_items.each do |item| %>
        <div class="inventory-item">
          <div class="inventory-item__header">
            <h2 class="inventory-item__name"><%= item.resource.name %></h2>
            <span class="inventory-item__rarity inventory-item__rarity--<%= item.resource.rarity %>">
              <%= item.resource.rarity.humanize %>
            </span>
          </div>

          <% if item.resource.description.present? %>
            <p class="inventory-item__description"><%= item.resource.description %></p>
          <% end %>

          <div class="inventory-item__details">
            <div class="inventory-item__detail">
              <span class="inventory-item__detail-label">Quantity:</span>
              <span class="inventory-item__detail-value"><%= item.quantity %></span>
            </div>

            <div class="inventory-item__detail">
              <span class="inventory-item__detail-label">Purchase Price:</span>
              <span class="inventory-item__detail-value">$<%= number_with_precision(item.purchase_price, precision: 2, delimiter: ',') %></span>
            </div>

            <div class="inventory-item__detail">
              <span class="inventory-item__detail-label">Total Value:</span>
              <span class="inventory-item__detail-value">$<%= number_with_precision(item.total_value, precision: 2, delimiter: ',') %></span>
            </div>

            <div class="inventory-item__detail">
              <span class="inventory-item__detail-label">Purchased:</span>
              <span class="inventory-item__detail-value">Day <%= item.purchase_day %></span>
            </div>

            <div class="inventory-item__detail">
              <span class="inventory-item__detail-label">Size:</span>
              <span class="inventory-item__detail-value"><%= item.resource.inventory_size %> per unit</span>
            </div>

            <% if item.resource.tag_names.any? %>
              <div class="inventory-item__tags">
                <% item.resource.tag_names.each do |tag| %>
                  <span class="inventory-item__tag"><%= tag.humanize %></span>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="inventory-empty">
      <p class="inventory-empty__message">Your inventory is empty. Start trading to acquire resources!</p>
    </div>
  <% end %>
</div>
